<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="at">

<!--로그인한 회원의 출근-퇴근 처리  (오늘날짜) -->
<update id='attend'>
{ call pro_attend( #{emp_no} ) }
</update>

<!--로그인한 회원의 출근-퇴근 조회  -->
<select id = ' attend_list_today'>
select a.emp_no, e.emp_name ,TO_CHAR(a.ATTEND_ON,'yyyy/mm/dd hh24:mi:ss') ATTEND_ON, TO_CHAR(a.ATTEND_off,'yyyy/mm/dd hh24:mi:ss') ATTEND_off
from tbl_attend a inner join tbl_emp e
on a.emp_no = e.emp_no
and a.emp_no = #{emp_no};
</select>

<!-- 로그인한 회원의 출퇴근(전체날짜) 목록 조회  -나중에 연차및 휴가상태 추가하기  -->
<select id = 'attend_list_all'>
select a.emp_no, e.emp_name , a.attend_date, a.att_status
from tbl_attend a inner join tbl_emp e
on a.emp_no = e.emp_no
and a.emp_no =#{emp_no};

</select>
</mapper>